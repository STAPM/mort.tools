<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Process Mortality Microdata • mort.tools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Process Mortality Microdata">
<meta property="og:description" content="Read, Clean and Analyse Cause-Specific Mortality Data.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">mort.tools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/mort_rates.html">Cause-specific mortality data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="mort-tools" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mort-tools" class="anchor"></a>mort.tools <img src="tools/mort.tools_hex.png" align="right" style="padding-left:10px;background-color:white;" width="100" height="100">
</h1></div>

<p><strong>DRAFT WORKING VERSION</strong> - The package is usable but there are still bugs and further developments that are being worked through i.e. some code and documentation is still incomplete or in need of being refined. The code and documentation are still undergoing internal review by the analyst team.</p>
<div id="motivation" class="section level2">
<h2 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h2>
<p><code>mort.tools</code> was created as part of a programme of work on the health economics of tobacco and alcohol at the School of Health and Related Research (ScHARR), The University of Sheffield. This programme is based around the construction of the Sheffield Tobacco and Alcohol Policy Model (STAPM), which aims to use comparable methodologies to evaluate the impacts of tobacco and alcohol policies, and investigate the consequences of clustering and interactions between tobacco and alcohol consumption behaviours.</p>
<p>The motivation for <code>mort.tools</code> was to develop a set of functions to clean and do basic processing of the data. The advantage of this is that it ensures we apply a consistent approach across years of data and across the different projects for which we use the data.</p>
</div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<p>For England, we use data with the following specifications that we obtained through a data access agreement with the Office for National Statistics.</p>
<blockquote>
<p>In the use of these data, we abide by the terms of the data access agreement with ONS and the ScHARR information governance policy. This R package contains only code - it does not contain any data inputs or outputs.</p>
</blockquote>
<p><strong>Death microdata</strong>:<br>
- 326 lower tier local authorities<br>
- Index of Multiple Deprivation quintiles<br>
- sex<br>
- Age groups single year of age then 90+ - ICD-Codes. Bespoke groupings of codes corresponding to the published literature on diseases attributable to tobacco and alcohol<br>
- years 2001 to the latest available<br>
- Death Counts</p>
<p><strong>Population microdata</strong>:<br>
- 326 lower tier LAs<br>
- IMD quintiles<br>
- sex<br>
- Age groups single year of age then 90+<br>
- Pop Counts<br>
- 2001 to the latest available</p>
<p>The data will inform health-economic models of past trends and potential policy effects for policymaker decision-support. It will inform strategic thinking across policy options that target alcohol and tobacco related harms at national and local authority levels.</p>
<p>The programme of work includes 1) understanding past trends, and 2) forecasting to estimate the potential effects of new policy or interventions. This work is being conducted at a range of geographic scales, including national and local authority level. Note that the work tends to consider a range of outcomes of which mortality is a part.</p>
<p>The two main objectives are:<br>
1. To investigate past trends in alcohol and/or smoking related deaths, death rates and the consequent years of life lost. The data will also be used to investigate past policy effects on these outcomes.<br>
1. To investigate the potential future effects of potential changes to alcohol and/or tobacco policy on deaths, death rates and the consequent years of life lost.</p>
<p>Ethical approval for the use of these data was obtained from the ScHARR Research Ethics Committee (ref: 023092).</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The suite of functions within <code>mort.tools</code> reads the data for each year, produces cause-specific life tables (focusing on the diseases related to tobacco and alcohol), and gives options for conducting forecasts of cause-specific death rates using the Lee-Carter method.</p>
<p>The <strong>inputs</strong> are the counts of death and mid-year population size.</p>
<p>The <strong>processes</strong> applied by the functions in <code>mort.tools</code> give options to:</p>
<ol>
<li>Read each year of data.<br>
</li>
<li>Group the data by the causes related to tobacco and alcohol.<br>
</li>
<li>Construct cause-specific life tables.<br>
</li>
<li>Forecast trends in cause-specific mortality.</li>
</ol>
<p>The <strong>output</strong> of these processes are the trends in cause-specific death rates and population sizes. These dataset can be saved so that you don’t need to run the cleaning processes in <code>mort.tools</code> each time you want to use the cleaned data.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>We would like to ask that since the code and documentation is still under development and is complex, that you consult with the authors before you use it.</p>
<p>Please cite the latest version of the package using:<br>
“Duncan Gillespie, Laura Webster, Colin Angus and Alan Brennan (2020). mort.tools: Read, Clean and Analyse Cause-Specific Mortality Data. R package version x.x.x. <a href="https://STAPM.github.io/mort.tools/" class="uri">https://STAPM.github.io/mort.tools/</a>. DOI: 10.5281/zenodo.3800592.”</p>
<hr>
<p>Since you will be downloading and installing a source package, you might need to set your system up for building R packages:</p>
<p>It is a good idea to update R and all of your packages.</p>
<p><strong>Mac OS</strong>: A convenient way to get the tools needed for compilation is to install Xcode Command Line Tools. Note that this is much smaller than full Xcode. In a shell, enter xcode-select –install. For installing almost anything else, consider using <a href="https://brew.sh/">Homebrew</a>.</p>
<p><strong>Windows</strong>: Install Rtools. This is not an R package! It is “a collection of resources for building packages for R under Microsoft Windows, or for building R itself”. Go to <a href="https://cran.r-project.org/bin/windows/Rtools/" class="uri">https://cran.r-project.org/bin/windows/Rtools/</a> and install as instructed.</p>
<hr>
<p>You can <strong>install the development version of <code>mort.tools</code></strong> from github with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co">#install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"STAPM/mort.tools"</span>)</pre></div>
<hr>
<p>If there is an error with <code>install_github()</code>, or for data security reasons you need to use the package on a computer with no internet connection, one possible work-around is</p>
<ol>
<li><p>Download the package “tarball” by copying this into your internet browser (making sure the numbers at the end indicate the latest version) e.g. <code>https://github.com/STAPM/mort.tools/tarball/0.3.4</code>. When the window pops up, choose where to save the .tar.gz file.</p></li>
<li><p>Go to the Terminal window in R Studio (or a console window in Windows by searching for “cmd”) and install the package from the downloaded file by typing <code>R CMD INSTALL [file path]</code>.</p></li>
</ol>
<hr>
<p>Then load the package, and some other packages that are useful. Note that the code within <code>hseclean</code> uses the <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table::data.table()</a></code> syntax.</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="co"># Load the package</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">mort.tools</span>)

<span class="co"># Other useful packages</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>) <span class="co"># for data manipulation and summary</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">magrittr</span>) <span class="co"># for pipes</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>) <span class="co"># for plotting</span></pre></div>
</div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
</div>
<div id="basic-functionality" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-functionality" class="anchor"></a>Basic functionality</h2>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>STAPM webpage at <br><a href="https://stapm.github.io/">https://​stapm.github.io/​</a>
</li>
<li>Browse source code at <br><a href="https://github.com/STAPM/mort.tools">https://​github.com/​STAPM/​mort.tools</a>
</li>
<li>Read the ScHARR Information Governance Policy at <br><a href="https://www.sheffield.ac.uk/scharr/research/igov/policy00">https://​www.sheffield.ac.uk/​scharr/​research/​igov/​policy00</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d">Duncan Gillespie</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3450-5747" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Laura Webster <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/angus_c">Colin Angus</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a">Alan Brennan</a> <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://doi.org/10.5281/zenodo.3800592"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.3800592.svg" alt="DOI"></a></li>
<li><a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d">Duncan Gillespie</a>, Laura Webster, <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/angus_c">Colin Angus</a>, <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a">Alan Brennan</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
